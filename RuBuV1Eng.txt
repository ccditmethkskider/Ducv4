-- dự án key system 
repeat wait() until game:IsLoaded() and game.Players.LocalPlayer

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")

local key = getgenv().Key or nil
local hwid = gethwid and gethwid() or tostring(Players.LocalPlayer.UserId)

if not key then
    Players.LocalPlayer:Kick("dumemay vui lòng mua key")
    return
end

local url = "http://stuckz.work.gd/api/check.php?key=" .. key .. "&hwid=" .. hwid

local success, response = pcall(function()
    return HttpService:JSONDecode(game:HttpGet(url))
end)

if not success then
    Players.LocalPlayer:Kick("Error server, vui lòng liên hệ admin (Mã lỗi: 500)")
    return
end

if response.status ~= true then
    Players.LocalPlayer:Kick("Key sai hoặc HWID sai: " .. (response.error or ""))
    return
end

if response.hwid == nil then
    local saveUrl = "http://stuckz.work.gd/api/save_hwid.php"
    local saveSuccess, saveResponse = pcall(function()
        return HttpService:JSONDecode(game:HttpPost(saveUrl, HttpService:JSONEncode({key = key, hwid = hwid}), "application/json"))
    end)

    if not saveSuccess or not saveResponse.success then
        Players.LocalPlayer:Kick("Lỗi từ hwid: " .. (saveResponse.error or "Unknown error"))
        return
    end
end

print("oke baby")

game.StarterGui:SetCore("SendNotification", {
    Title = "Zush Hub",
    Text = "Xác minh thành công",
    Duration = 5,
    Icon = "rbxassetid://121407840908698"
})

loadstring(game:HttpGet("https://duckcode.sbs/bossfarm.lua"))()
