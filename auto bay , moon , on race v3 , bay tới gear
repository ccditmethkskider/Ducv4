local TweenService = game:GetService("TweenService")

-- H√†m Tween ƒë·ªÉ bay m∆∞·ª£t
function topos(targetCFrame)
    local player = game.Players.LocalPlayer
    local char = player.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    local humanoid = char and char:FindFirstChildOfClass("Humanoid")

    if not hrp or not humanoid then return end
    if humanoid.Sit then humanoid.Sit = false end

    local distance = (targetCFrame.Position - hrp.Position).Magnitude
    local speed = 100 -- T·ªëc ƒë·ªô bay ch·∫≠m h∆°n ƒë·ªÉ tr√°nh vƒÉng
    local duration = distance / speed

    -- Tween ƒë·ªÉ di chuy·ªÉn m∆∞·ª£t
    local tweenInfo = TweenInfo.new(duration, Enum.EasingStyle.Linear)
    local tween = TweenService:Create(hrp, tweenInfo, {CFrame = targetCFrame})
    tween:Play()

    -- Ch·ªù Tween ch·∫°y xong
    tween.Completed:Wait()
end

-- Bay ƒë·∫øn ƒë·∫£o
_G.MysticIsland = true
spawn(function()
    while wait(1) do
        if _G.MysticIsland then
            local mysticIsland = game:GetService("Workspace").Map:FindFirstChild("MysticIsland")
            if mysticIsland then
                local position = mysticIsland.WorldPivot.Position
                topos(CFrame.new(position.X, position.Y + 100, position.Z)) -- Bay cao h∆°n tr√°nh r·ªõt
                _G.MysticIsland = false
                wait(2)
                _G.AutoLockMoon = true
            end
        end
    end
end)

-- T·ª± ƒë·ªông nh√¨n trƒÉng
spawn(function()
    while wait(1) do
        pcall(function()
            if _G.AutoLockMoon then
                local moonDir = game.Lighting:GetMoonDirection()
                local lookAtPos = game.Workspace.CurrentCamera.CFrame.p + moonDir * 100
                game.Workspace.CurrentCamera.CFrame = CFrame.lookAt(game.Workspace.CurrentCamera.CFrame.p, lookAtPos)
            end
        end)
    end
end)

-- B·∫≠t t·ªôc V3
spawn(function()
    while wait(1) do
        pcall(function()
            if _G.AutoLockMoon then
                game:GetService("VirtualInputManager"):SendKeyEvent(true, "T", false, game)
                wait(0.1)
                game:GetService("VirtualInputManager"):SendKeyEvent(false, "T", false, game)
                print("üü¢ ƒê√£ k√≠ch ho·∫°t t·ªôc V3!")
                wait(5)
                _G.AutoLockMoon = false
                _G.TweenMGear = true
            end
        end)
    end
end)

-- Bay ƒë·∫øn b√°nh rƒÉng
_G.TweenMGear = false
spawn(function()
    while wait(1) do
        if _G.TweenMGear then
            local mysticIsland = game:GetService("Workspace").Map:FindFirstChild("MysticIsland")
            if mysticIsland then
                for _, v in pairs(mysticIsland:GetChildren()) do
                    if v:IsA("MeshPart") and v.Material == Enum.Material.Neon then
                        print("üü¢ ƒê√£ t√¨m th·∫•y b√°nh rƒÉng! ƒêang bay ƒë·∫øn...")
                        topos(v.CFrame)
                        _G.TweenMGear = false
                    end
                end
            end
        end
    end
end)
